# ------------------------------------------------------
# THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
# ------------------------------------------------------

type IdentityResponse {
  id: String!
}

type UserView {
  id: String!
  name: String!
  email: String!
}

type TokenResponse {
  access_token: String!
  expires_in: String!
  token_type: String!
}

type DataModelFieldView {
  name: String!
  label: String!
  type: DataModelFieldType!
  required: Boolean!
}

enum DataModelFieldType {
  Text
  Integer
  Float
  Boolean
}

type DataStorageView {
  id: String!
  createdBy: UserView!
  type: StorageType!
  status: StorageStatus!
}

enum StorageType {
  Postgres
}

enum StorageStatus {
  Pending
  Ready
}

type DataStoragePageableResponse {
  count: Int!
  data: [DataStorageView!]!
}

type DataModelView {
  id: String!
  createdBy: UserView!
  name: String!
  fields: [DataModelFieldView!]!
  dataStorage: DataStorageView!
}

type DataModelPageableResponse {
  count: Int!
  data: [DataModelView!]!
}

type InsertResponse {
  id: Int!
}

type QueryFindAndCountResponse {
  count: Int!
  data: [JSON!]!
}

"""
The `JSON` scalar type represents JSON values as specified by [ECMA-404](http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-404.pdf).
"""
scalar JSON @specifiedBy(url: "http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-404.pdf")

type Query {
  userAuthenticated: UserView!
  dataStoragesFind(request: PageableRequest!): DataStoragePageableResponse!
  dataModelQueryFindAndCount(id: String!, query: JSON!): QueryFindAndCountResponse!
  dataModelsFind(request: PageableRequest!): DataModelPageableResponse!
  dataModelQueryFind(id: String!, query: JSON): QueryFindAndCountResponse!
  dataModelQueryFindOne(id: String!, query: JSON!): JSON!
}

input PageableRequest {
  take: Int!
  skip: Int!
}

type Mutation {
  userRegister(dto: RegisterDTO!): IdentityResponse!
  userLogin(dto: LoginDTO!): TokenResponse!
  userUpdate(id: String!, dto: UpdateUserDTO!): Void
  dataStorageCreate(dto: DataStorageDto!): IdentityResponse
  dataStorageInitialize(id: String!): Void
  dataStorageSynchronize(id: String!): Void
  dataModelCreate(dto: DataModelDto!): IdentityResponse!
  dataModelUpdate(id: String!, dto: DataModelDto!): Void
  dataModelRemove(id: String!): Void
  dataModelInsert(id: String!, data: JSON!): InsertResponse
  dataModelQueryInsert(id: String!, data: JSON!): InsertResponse!
  dataModelQueryInsertMany(id: String!, data: [JSON!]!): [InsertResponse!]!
  dataModelQueryUpdate(id: String!, where: JSON!, data: JSON!): Void
  dataModelQueryDelete(id: String!, where: JSON!): Void
}

input RegisterDTO {
  name: String!
  email: String!
  password: String!
}

input LoginDTO {
  email: String!
  password: String!
}

"""Represents NULL values"""
scalar Void

input UpdateUserDTO {
  name: String!
}

input DataStorageDto {
  type: StorageType!
}

input DataModelDto {
  name: String!
  fields: [DataModelFieldDto!]!
  dataStorageId: String!
}

input DataModelFieldDto {
  name: String!
  label: String
  type: DataModelFieldType!
  required: Boolean
}